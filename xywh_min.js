var mediaFragments=function(a,b){function c(a){for(var c="img,video",f=a?a.querySelectorAll(c):b.querySelectorAll(c),g=0,h=f.length;h>g;g++){var i=f[g],j=i.src||i.currentSrc,k=/[#&\?]xywh\=(pixel\:|percent\:)?(\d+),(\d+),(\d+),(\d+)/,l=k.exec(j);if(l){var m={mediaItem:i,mediaType:i.nodeName.toLowerCase(),unit:l[1]?l[1]:"pixel:",x:l[2],y:l[3],w:l[4],h:l[5]};"img"===m.mediaType?d(m):e(m)}}}function d(a){var b=a.mediaItem,c=function(){f(a),b.removeEventListener("load",c),b.src="data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="};b.addEventListener("load",c)}function e(a){a.mediaItem.addEventListener("loadedmetadata",function(){f(a)})}function f(a){var d,e,f,g,c=a.mediaItem,h=c.width||c.videoWidth,i=c.height||c.videoHeight;if("pixel:"===a.unit){var j=c.naturalWidth?h/c.naturalWidth:h/c.clientWidth;f=a.w*j+"px",g=a.h*j+"px",d="-"+a.x*j+"px",e="-"+a.y*j+"px"}else f=h*a.w/100+"px",g=i*a.h/100+"px",d="-"+h*a.x/100+"px",e="-"+i*a.y/100+"px";if("video"===a.mediaType){var k=b.createElement("div");k.style.cssText+="overflow:hidden;width:"+f+";"+"height:"+g+";"+"padding:0;"+"margin:0;"+"border-radius:0;"+"border:none;",c.style.cssText+="transform:translate("+d+","+e+");"+"-webkit-transform:translate("+d+","+e+");",c.parentNode.insertBefore(k,c),k.appendChild(c),c.hasAttribute("autoplay")&&c.play()}else c.style.cssText+="width:"+f+";"+"height:"+g+";"+"background:url("+c.src+") "+"no-repeat "+d+" "+e+"; "+"background-size: "+h+"px "+i+"px;"}return a.addEventListener("DOMContentLoaded",function(){c()}),{apply:function(a){c(a)}}}(window,document);